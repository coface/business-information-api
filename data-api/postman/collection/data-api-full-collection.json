{"info":{"_postman_id":"0f45fbef-5f83-45f9-9893-46867bfe8ffa","name":"ICON Data API - API Steward","description":"Contact Support:\n Name: COFACE ICON\n Email: amandine.tridou-ext@coface.com","schema":"https://schema.getpostman.com/json/collection/v2.1.0/collection.json"},"item":[{"name":"authentification","item":[{"name":"token","event":[{"listen":"test","script":{"exec":["pm.environment.set(\"idToken\", JSON.parse(responseBody).idToken);"],"type":"text/javascript","id":"7727521b-b659-4877-be00-f823602bd877"}}],"id":"4666e853-d51d-4494-b8a1-390928309cdd","protocolProfileBehavior":{"disabledSystemHeaders":{},"disableBodyPruning":true},"request":{"auth":{"type":"apikey","apikey":[{"key":"value","value":"{{dataAPIApiKey}}","type":"string"},{"key":"key","value":"x-api-key","type":"string"}]},"method":"POST","header":[],"body":{"mode":"raw","raw":"{\r\n    \"password\": \"{{awsPassword}}\",\r\n    \"grantType\": \"password\",\r\n    \"username\": \"{{awsLogin}}\"\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{authentificationAPIBaseUrl}}/token","host":["{{authentificationAPIBaseUrl}}"],"path":["token"]}},"response":[]}],"id":"ce6fac13-c946-4f2f-bada-c1b1bc0904c0"},{"name":"assessments","item":[{"name":"assessments","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"27b7ba59-df9f-42fd-a57e-ff96ccbede8c"}},{"listen":"test","script":{"exec":[""],"type":"text/javascript","id":"b7c526ee-7e5d-4967-ab73-7624c8e15c3a"}}],"id":"f4bafc83-2d1e-4af2-9610-c7159b9e9390","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"},{"key":"Accept-Language","value":"FR","type":"text"}],"url":{"raw":"{{dataAPIBaseUrl}}/assessments?countryCode=PL","host":["{{dataAPIBaseUrl}}"],"path":["assessments"],"query":[{"key":"countryCode","value":"PL"}]}},"response":[]}],"id":"8091bb40-835e-4844-800c-4ed57ecacc97"},{"name":"companies","item":[{"name":"identifications","item":[{"name":"GET","item":[{"name":"companies/identifications","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"2bbbaa48-8f50-49d8-b706-cb8ff02c17e4"}},{"listen":"test","script":{"exec":[""],"type":"text/javascript","id":"52a49795-cba7-4754-8c3a-8294472fe1c0"}}],"id":"c1232992-ca4f-482a-b0c3-9d47611d5403","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"}],"url":{"raw":"{{dataAPIBaseUrl}}/companies/identifications","host":["{{dataAPIBaseUrl}}"],"path":["companies","identifications"]}},"response":[]}],"id":"0fbfbe7d-6a6b-4c59-9f2f-3662c5b975cf"},{"name":"POST","item":[{"name":"companies/identifications - Template","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"304fc0af-4ef2-4904-87f4-71ed319edd22"}},{"listen":"test","script":{"exec":[""],"type":"text/javascript","id":"6913f52e-fec9-484c-8938-99d6e5c80c9a"}}],"id":"5ee87643-9dbb-4da3-8039-a54bd348946f","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"}],"body":{"mode":"raw","raw":"{\n  \"name\": \"Coface SA\",\n  \"address\": {\n    \"address1\": \"2 rue de Siam\",\n    \"address2\": \"Bâtiment B, Escalier C\",\n    \"postalCode\": \"qui\",\n    \"city\": \"BREST\",\n    \"countryCode\": \"FR\"\n  },\n  \"email\": \"john.doe@example.com\",\n  \"phoneNumber\": \"0102030405\",\n  \"externalIds\": [\n    {\n      \"id\": \"123456\",\n      \"repositorySlug\": \"easy\"\n    },\n    {\n      \"id\": \"123456\",\n      \"repositorySlug\": \"easy\"\n    }\n  ]\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{dataAPIBaseUrl}}/companies/identifications","host":["{{dataAPIBaseUrl}}"],"path":["companies","identifications"]}},"response":[]},{"name":"companies/identifications - With externalId","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"14becfec-61ef-4ab6-b93a-1b1767be5f57"}},{"listen":"test","script":{"exec":[""],"type":"text/javascript","id":"ee969f6e-0035-4f3f-aadd-6a91993680f8"}}],"id":"7f778ec9-6c4f-4032-aff9-fbb2232dcb99","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"}],"body":{"mode":"raw","raw":"{\n    \"address\": {\n        \"countryCode\": \"PL\"\n    },\n    \"externalIds\": [\n    {\n      \"id\": \"5423209690\",\n      \"repositorySlug\": \"vat-number\"\n    }]\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{dataAPIBaseUrl}}/companies/identifications","host":["{{dataAPIBaseUrl}}"],"path":["companies","identifications"]}},"response":[]},{"name":"companies/identifications - One match","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"b91baca5-98e0-44e9-a353-3e528b8d4ff5"}},{"listen":"test","script":{"exec":[""],"type":"text/javascript","id":"1450b775-ebbd-4b26-a47f-12d48b062564"}}],"id":"2c6d0fbf-4ff5-495c-b6bb-fdfb65532f2a","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"}],"body":{"mode":"raw","raw":"{\n    \"name\": \"Praktyka Stomatologiczna Karol\",\n    \"address\": {\n        \"postalCode\": \"25-015\",\n        \"city\": \"Warszawa\",\n        \"countryCode\": \"PL\"\n    }\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{dataAPIBaseUrl}}/companies/identifications","host":["{{dataAPIBaseUrl}}"],"path":["companies","identifications"]}},"response":[]},{"name":"companies/identifications - Multiple matches","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"7cd15489-6d1d-4e09-9053-a5085233429f"}},{"listen":"test","script":{"exec":[""],"type":"text/javascript","id":"46d49bdd-e890-428f-b393-ee3f75566e36"}}],"id":"b818f65d-40a7-4978-a0a5-3cb0eaed42ee","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"}],"body":{"mode":"raw","raw":"{\n    \"name\": \"STOW\",\n    \"address\": {\n        \"postalCode\": \"02-127\",\n        \"city\": \"Warszawa\",\n        \"countryCode\": \"PL\"\n    }\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{dataAPIBaseUrl}}/companies/identifications","host":["{{dataAPIBaseUrl}}"],"path":["companies","identifications"]}},"response":[]}],"id":"5b959b91-43c8-4dec-80a7-c58fe6fab235"}],"id":"7d611ad5-0b22-42ab-b548-56d97cccefc6"},{"name":"repositories","item":[{"name":"repositories","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"e7211fe2-7799-4cdc-93f2-c93367113635"}},{"listen":"test","script":{"exec":["pm.test(request.name, function () {\r","    checkResponse(pm, 200);\r","    var responseJson = pm.response.json();\r","    pm.expect(responseJson.length).to.eql(6);\r","});"],"type":"text/javascript","id":"76b5f866-9ad5-4572-9a26-767572510633"}}],"id":"421b7441-7f14-4bfe-aae9-2b9f469c9bef","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"},{"key":"Accept-Language","value":"FR","type":"text","disabled":true}],"url":{"raw":"{{dataAPIBaseUrl}}/companies/repositories?countryCode=PL","host":["{{dataAPIBaseUrl}}"],"path":["companies","repositories"],"query":[{"key":"countryCode","value":"PL","description":"(Required) Country code (ISO 3166 Alpha-2)"}]}},"response":[]}],"id":"9c71bdd0-c77c-48d1-b793-283750017ce8"},{"name":"companies - Search by companyId","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"69a90c00-a1ae-4097-9a7b-85216cc87269"}},{"listen":"test","script":{"exec":[""],"type":"text/javascript","id":"d9c3a801-277b-4d15-b672-ab82a0994b9d"}}],"id":"b2473295-7cef-464e-bf50-8a794744f5e7","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"}],"url":{"raw":"{{dataAPIBaseUrl}}/companies?companyId=14f33e61-f323-3403-b842-1486c381f011","host":["{{dataAPIBaseUrl}}"],"path":["companies"],"query":[{"key":"externalId","value":"officia sint in","description":"External identifier under the following format {repository}#{id}","disabled":true},{"key":"companyName","value":"coca","description":"Company name","disabled":true},{"key":"postalCode","value":"officia sint in","description":"Postal code, ZIP Code","disabled":true},{"key":"city","value":"officia sint in","description":"City","disabled":true},{"key":"state","value":"officia sint in","description":"State","disabled":true},{"key":"countryCode","value":"AT","description":"Country code (ISO 3166 Alpha-2)","disabled":true},{"key":"range","value":"10-25","description":"Pagination interval\n\nEx: Resources from an index to another included one (from 10 to 25 => ?range = 10-25).","disabled":true},{"key":"companyId","value":"14f33e61-f323-3403-b842-1486c381f011"}]}},"response":[]},{"name":"companies - Search by externalId","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"b564f632-9811-4836-b412-f46bf1a1bab5"}},{"listen":"test","script":{"exec":[""],"type":"text/javascript","id":"48a750bf-e6b5-4a91-a218-e2282c468935"}}],"id":"be160d89-ecff-4221-94e0-8ec5cf8f826d","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"}],"url":{"raw":"{{dataAPIBaseUrl}}/companies?countryCode=PL&externalId=icon%23121453508","host":["{{dataAPIBaseUrl}}"],"path":["companies"],"query":[{"key":"companyId","value":"397fb600-414c-3a55-a41a-d66bb6cfb36c","description":"Company identifier","disabled":true},{"key":"companyName","value":"coca","description":"Company name","disabled":true},{"key":"postalCode","value":"officia sint in","description":"Postal code, ZIP Code","disabled":true},{"key":"city","value":"officia sint in","description":"City","disabled":true},{"key":"state","value":"officia sint in","description":"State","disabled":true},{"key":"countryCode","value":"PL","description":"Country code (ISO 3166 Alpha-2)"},{"key":"externalId","value":"icon%23121453508"}]}},"response":[]},{"name":"companies - Search by companyInfo","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"64ed6003-efd3-4622-8c02-a30198b76f98"}},{"listen":"test","script":{"exec":[""],"type":"text/javascript","id":"6e31d661-c42f-4f82-ab3e-3c5db64fe111"}}],"id":"91e7fba1-cf9d-44ff-a1a8-612cacc04c11","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"}],"url":{"raw":"{{dataAPIBaseUrl}}/companies?companyName=HACK-Hack Ralf&postalCode=70-552&city=Szczecin&countryCode=PL","host":["{{dataAPIBaseUrl}}"],"path":["companies"],"query":[{"key":"companyId","value":"397fb600-414c-3a55-a41a-d66bb6cfb36c","description":"Company identifier","disabled":true},{"key":"companyName","value":"HACK-Hack Ralf","description":"Company name"},{"key":"postalCode","value":"70-552","description":"Postal code, ZIP Code"},{"key":"city","value":"Szczecin","description":"City"},{"key":"countryCode","value":"PL","description":"Country code (ISO 3166 Alpha-2)"},{"key":"range","value":"10-25","description":"Pagination interval\n\nEx: Resources from an index to another included one (from 10 to 25 => ?range = 10-25).","disabled":true},{"key":"externalId","value":"statistic-number%23810684000","disabled":true}]}},"response":[]}],"id":"00d56e45-76ff-4305-a66a-42ec95ed376d"},{"name":"countries","item":[{"name":"/:countryCode","item":[{"name":"countries - Get one","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"278dbf10-989a-4f79-a9b6-86ea6ff7de05"}},{"listen":"test","script":{"exec":[""],"type":"text/javascript","id":"3a0f05fa-203a-4d17-a018-eb677651206e"}}],"id":"9a33298a-ba2c-427d-96e4-b1da6fe7a8ba","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"},{"key":"Accept-Language","value":"PL","type":"text"}],"url":{"raw":"{{dataAPIBaseUrl}}/countries/FR","host":["{{dataAPIBaseUrl}}"],"path":["countries","FR"]}},"response":[]}],"id":"a3a57850-3720-4f0c-a6b5-fad0baed1c64"},{"name":"countries","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"2fb0854e-e2b1-47a3-bf73-f56d858958fa"}},{"listen":"test","script":{"exec":[""],"type":"text/javascript","id":"f378f750-5834-4172-b3ef-0a97290e2bc0"}}],"id":"be9b8d5b-cda3-4b28-90eb-4b1370dd42a3","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"},{"key":"Accept-Language","value":"FR","type":"text"}],"url":{"raw":"{{dataAPIBaseUrl}}/countries","host":["{{dataAPIBaseUrl}}"],"path":["countries"]}},"response":[]}],"id":"f70aed35-e52d-4a92-9478-2f12b7dcfa76"},{"name":"monitorings","item":[{"name":"POST","item":[{"name":"monitorings -  No company slug","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"e30e76d4-21da-46cd-804d-dc04c41838a3"}},{"listen":"test","script":{"exec":[""],"type":"text/javascript","id":"c0d709b3-8135-4433-9e89-6ca9b2487a25"}}],"id":"b3414d56-f4f7-43b9-bc99-b8cebe36bb91","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"},{"key":"Accept-Language","value":"FR","type":"text"}],"body":{"mode":"raw","raw":"{\r\n    \"countryCode\": \"FR\",\r\n    \"startDate\" : \"2022-04-10\",\r\n    \"callbackUrl\": \"https://webhook.site/7b0d250c-6e7e-4823-94ed-4a6fc00fc79b\",\r\n    \"assessments\": [\r\n        {\r\n            \"slug\": \"country-risk-assessment\"\r\n        },{\r\n            \"naceCode\" : \"9000\",\r\n            \"slug\": \"sector-risk-assessment\"\r\n        }\r\n    ]\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{dataAPIBaseUrl}}/monitorings/orders","host":["{{dataAPIBaseUrl}}"],"path":["monitorings","orders"]}},"response":[]},{"name":"monitorings -  Company slug with companyId","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"5c53dab3-5cd8-4bc1-a085-013a48b5ac7f"}},{"listen":"test","script":{"exec":[""],"type":"text/javascript","id":"7bcd0330-47fd-472f-9a82-1195b8403285"}}],"id":"1b9cd3ee-ad2b-4d9a-b13d-649bd0a3366d","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"},{"key":"Accept-Language","value":"EN","type":"text"}],"body":{"mode":"raw","raw":"{\r\n    \"companyId\": \"{{companyId}}\",\r\n    \"startDate\" : \"{{startDate}}\",\r\n    \"callbackUrl\": \"https://webhook.site/7b0d250c-6e7e-4823-94ed-4a6fc00fc79b\",\r\n    \"assessments\": [\r\n        {\r\n            \"slug\": \"debtor-risk-assessment\"\r\n        },\r\n        {\r\n            \"slug\": \"debtor-risk-assessment-package\"\r\n        },\r\n        {\r\n            \"currency\" : \"EUR\",\r\n            \"slug\": \"credit-opinion\"\r\n        }\r\n    ]\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{dataAPIBaseUrl}}/monitorings/orders","host":["{{dataAPIBaseUrl}}"],"path":["monitorings","orders"]}},"response":[]},{"name":"monitorings -  Company slug with externalId","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"c89f6798-6d1d-4e1d-987c-a82256634029"}},{"listen":"test","script":{"exec":[""],"type":"text/javascript","id":"f8395019-6836-46a7-9f88-7073fc4a1c38"}}],"id":"06c12271-7371-4b5b-a49a-76aaac80549f","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"},{"key":"Accept-Language","value":"EN","type":"text"}],"body":{"mode":"raw","raw":"{\r\n    \"externalId\": \"{{externalId}}\",\r\n    \"countryCode\": \"{{externalIdCountryCode}}\",\r\n    \"startDate\" : \"{{startDate}}\",\r\n    \"assessments\": [\r\n        {\r\n            \"slug\": \"debtor-risk-assessment\"\r\n        },\r\n        {\r\n            \"slug\": \"debtor-risk-assessment-package\"\r\n        },\r\n        {\r\n            \"currency\" : \"EUR\",\r\n            \"slug\": \"advanced-opinion\"\r\n        }\r\n    ]\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{dataAPIBaseUrl}}/monitorings/orders","host":["{{dataAPIBaseUrl}}"],"path":["monitorings","orders"]}},"response":[]}],"id":"974943be-297d-49c5-b0dd-193064ea3487"},{"name":"GET","item":[{"name":"monitorings","id":"fe9447e9-80a3-4c2e-a965-13b71d1b03cc","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[{"key":"Accept","value":"application/json"}],"url":{"raw":"{{dataAPIBaseUrl}}/monitorings?companyId=Excepteur aliquip Ut&assessmentSlugs=debtor-risk-assessment&startDateFrom=&startDateTo=dolore elit&endDateFrom=dolore elit&endDateTo=2021-09-21&countryCode=RO&naceCode=XX&range=10-25","host":["{{dataAPIBaseUrl}}"],"path":["monitorings"],"query":[{"key":"companyId","value":"Excepteur aliquip Ut","description":"Company identifier"},{"key":"assessmentSlugs","value":"debtor-risk-assessment","description":"Assessment slug"},{"key":"startDateFrom","value":"","description":"All monitorings that started after this date"},{"key":"startDateTo","value":"dolore elit","description":"All monitorings that started before this date"},{"key":"endDateFrom","value":"dolore elit","description":"All monitorings that ended after this date"},{"key":"endDateTo","value":"2021-09-21","description":"All monitorings that ended before this date"},{"key":"countryCode","value":"RO","description":"Country Code"},{"key":"naceCode","value":"XX","description":"Nace code"},{"key":"range","value":"10-25","description":"Pagination interval (offset – limit)\nEx: Resources from an index to another included one (from 10 to 25 => ?range = 10-25)."}]},"description":"Retrieve all ordered monitoring"},"response":[]}],"id":"37fee3b0-e858-41d8-9162-f1019de72573"},{"name":"/:monitoringId","item":[{"name":"monitorings - Retrieve one","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"4e9e98ff-a98d-4786-a4fd-a58561d33cc0"}},{"listen":"test","script":{"exec":[""],"type":"text/javascript","id":"42c2ae83-8944-4ca1-b02e-ad87ab2b0651"}}],"id":"073c86dc-a7bf-4015-ae81-561f2abe4821","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"},{"key":"Accept-Language","value":"FR","type":"text"}],"url":{"raw":"{{dataAPIBaseUrl}}/monitorings/:monitoringId","host":["{{dataAPIBaseUrl}}"],"path":["monitorings",":monitoringId"],"variable":[{"id":"5ad324d7-22e9-4f0c-8edc-a3447458e1ce","key":"monitoringId","value":"put here a value"}]}},"response":[]}],"id":"1582d924-a1c3-4238-8d6e-da3a6303c629"}],"id":"f62240ed-6e2b-40a3-a33b-e53cbeadeed1"},{"name":"notifications","item":[{"name":"/:notificationId","item":[{"name":"notifications - Retrieve one","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"def35f5a-630f-42c1-8298-31ab7f5d7941"}},{"listen":"test","script":{"exec":[""],"type":"text/javascript","id":"6f4014ad-205d-44ac-a11c-3fced211af2b"}}],"id":"c5fda2b9-a30c-4b69-a013-b6275e626bd4","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"},{"key":"Accept-Language","value":"EN","type":"text"}],"url":{"raw":"{{dataAPIBaseUrl}}/notifications/:notificationId","host":["{{dataAPIBaseUrl}}"],"path":["notifications",":notificationId"],"variable":[{"id":"c0179a6c-9b51-4ea0-a80e-027e86e03ccf","key":"notificationId","value":"Put value here"}]}},"response":[]}],"id":"16eb9596-35f3-4c22-acaf-7802de589088"},{"name":"notifications","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"6d67cf3c-1df8-49d3-8c79-752e559ac27a"}},{"listen":"test","script":{"exec":[""],"type":"text/javascript","id":"73a49e01-556f-40b1-aef7-0ac2ce6a6285"}}],"id":"60fd8a5d-a471-4a63-a58b-8c863345910d","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"},{"key":"Accept-Language","value":"EN","type":"text"}],"url":{"raw":"{{dataAPIBaseUrl}}/notifications","host":["{{dataAPIBaseUrl}}"],"path":["notifications"],"query":[{"key":"deliveryDateFrom","value":"2021-05-06","description":"Date to get the notifications from","disabled":true},{"key":"deliveryDateTo","value":"2021-05-06","description":"Date to get the notifications til","disabled":true},{"key":"range","value":"10-25","description":"Pagination interval\n\nEx: Resources from an index to another included one (from 10 to 25 => ?range = 10-25).","disabled":true}]}},"response":[]}],"id":"da35fd62-13a0-4b27-8905-2ab434177d21"},{"name":"publications","item":[{"name":"POST","item":[{"name":"publications -  No company slug","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"7193d544-adaa-49bf-9e45-547a21bc6bc7"}},{"listen":"test","script":{"exec":[""],"type":"text/javascript","id":"01961978-3cbf-4ab3-95d5-32bacb81c93a"}}],"id":"33c65f51-ca9d-4ee6-9074-a4b0c593f901","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"},{"key":"Accept-Language","value":"FR","type":"text"}],"body":{"mode":"raw","raw":"{\r\n    \"countryCode\": \"FR\",\r\n    \"assessments\": [\r\n        {\r\n            \"slug\": \"country-risk-assessment\"\r\n        },{\r\n            \"naceCode\" : \"9000\",\r\n            \"slug\": \"sector-risk-assessment\"\r\n        }\r\n    ]\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{dataAPIBaseUrl}}/publications/orders","host":["{{dataAPIBaseUrl}}"],"path":["publications","orders"]}},"response":[]},{"name":"publications -  Company slug with companyId","event":[{"listen":"prerequest","script":{"exec":[""],"type":"text/javascript","id":"1f53838d-859c-477b-869a-3bc103457ddd"}},{"listen":"test","script":{"exec":["var moment = require('moment');\r","\r","pm.test(request.name, function () {\r","    var responseJson = pm.response.json();\r","    pm.expect(responseJson.orderDate).to.include(moment().format(\"YYYY-MM-DD\"));\r","    pm.expect(responseJson.publications.length).to.eql(3);\r","    pm.collectionVariables.set(\"newCompanyDeliveryId\", responseJson.publications[0].deliveryId);\r","\r","    checkPublication(pm, responseJson.publications[0], 0);\r","    checkPublication(pm, responseJson.publications[1], 1);\r","    checkPublication(pm, responseJson.publications[2], 2);\r","\r","});\r","\r","function checkPublication(pm, publication, index, startDate, endDate) {\r","    pm.expect(publication.href).to.eql(\"/publications/\" + publication.deliveryId);\r","    if (index == 1) {\r","        pm.expect(publication.assessmentSlug).to.eql(\"debtor-risk-assessment\");\r","        pm.expect(publication.currency).to.eql(undefined);\r","    } else if (index == 0) {\r","        pm.expect(publication.assessmentSlug).to.eql(\"debtor-risk-assessment-package\");\r","        pm.expect(publication.currency).to.eql(undefined);\r","    } else if (index == 2) {\r","        pm.expect(publication.assessmentSlug).to.eql(\"credit-opinion\");\r","       // pm.expect(publication.currency).to.eql(\"EUR\");\r","    }\r","    pm.expect(publication.status).to.eql(\"in-preparation\");\r","}"],"type":"text/javascript","id":"db8ad608-a29d-4ede-b969-7d87c5b4570b"}}],"id":"7d212a2a-5728-4c58-bb2b-add20e342bf3","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"},{"key":"Accept-Language","value":"EN","type":"text"}],"body":{"mode":"raw","raw":"{\r\n    \"companyId\": \"{{companyId}}\",\r\n    \"assessments\": [\r\n        {\r\n            \"slug\": \"debtor-risk-assessment\"\r\n        },\r\n        {\r\n            \"slug\": \"debtor-risk-assessment-package\"\r\n        },\r\n        {\r\n            \"currency\" : \"EUR\",\r\n            \"slug\": \"credit-opinion\"\r\n        }\r\n    ]\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{dataAPIBaseUrl}}/publications/orders","host":["{{dataAPIBaseUrl}}"],"path":["publications","orders"]}},"response":[]},{"name":"publications -  Company slug with externalId","event":[{"listen":"prerequest","script":{"exec":["var moment = require('moment');\r","pm.collectionVariables.set(\"startDate\", moment().add(7, 'd').format(\"YYYY-MM-DD\"));"],"type":"text/javascript","id":"095aa16d-b2c3-48ab-97f2-274775673c7b"}},{"listen":"test","script":{"exec":["var moment = require('moment');\r","\r","pm.test(request.name, function () {\r","    var startDate = JSON.parse(request.data).startDate;\r","    var endDate = moment(startDate).add(1, 'Y').format(\"YYYY-MM-DD\");\r","\r","    var responseJson = pm.response.json();\r","    pm.expect(responseJson.orderDate).to.include(moment().format(\"YYYY-MM-DD\"));\r","    pm.expect(responseJson.monitorings.length).to.eql(3);\r","\r","    checkMonitoring(pm, responseJson.monitorings[0], 0, startDate, endDate);\r","    checkMonitoring(pm, responseJson.monitorings[1], 1, startDate, endDate);\r","    checkMonitoring(pm, responseJson.monitorings[2], 2, startDate, endDate);\r","\r","    pm.collectionVariables.set(\"newMonitoringId\", responseJson.monitorings[0].id);\r","});\r","\r","function checkMonitoring(pm, monitoring, index, startDate, endDate) {\r","    pm.expect(monitoring.id).to.eql(monitoring.initialDeliveryId);\r","    pm.expect(monitoring.companyId).to.eql(pm.collectionVariables.get(\"externalIdCompanyId\"));\r","    pm.expect(monitoring.startDate).to.eql(startDate);\r","    pm.expect(monitoring.endDate).to.eql(endDate);\r","    pm.expect(monitoring.countryCode).to.eql(pm.collectionVariables.get(\"externalIdCountryCode\"));\r","    pm.expect(monitoring.naceCode).to.eql(undefined);\r","    if (index == 0) {\r","        pm.expect(monitoring.assessmentSlug).to.eql(\"debtor-risk-assessment\");\r","        pm.expect(monitoring.currency).to.eql(undefined);\r","    } else if (index == 1) {\r","        pm.expect(monitoring.assessmentSlug).to.eql(\"debtor-risk-assessment-package\");\r","        pm.expect(monitoring.currency).to.eql(undefined);\r","    } else if (index == 2) {\r","        pm.expect(monitoring.assessmentSlug).to.eql(\"advanced-opinion\");\r","       // pm.expect(monitoring.currency).to.eql(\"EUR\");\r","    }\r","    pm.expect(monitoring.status).to.eql(\"in-preparation\");\r","}"],"type":"text/javascript","id":"c933ad32-cbda-4451-9be6-c08bdc25600f"}}],"id":"901bc972-9724-4cbc-957d-426778d38f5e","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"},{"key":"Accept-Language","value":"EN","type":"text"}],"body":{"mode":"raw","raw":"{\r\n    \"externalId\": \"{{externalId}}\",\r\n    \"countryCode\": \"{{externalIdCountryCode}}\",\r\n    \"startDate\" : \"{{startDate}}\",\r\n    \"assessments\": [\r\n        {\r\n            \"slug\": \"debtor-risk-assessment\"\r\n        },\r\n        {\r\n            \"slug\": \"debtor-risk-assessment-package\"\r\n        },\r\n        {\r\n            \"currency\" : \"EUR\",\r\n            \"slug\": \"advanced-opinion\"\r\n        }\r\n    ]\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{dataAPIBaseUrl}}/publications/orders","host":["{{dataAPIBaseUrl}}"],"path":["publications","orders"]}},"response":[]}],"id":"53c96e01-1c85-4389-b718-a607b790897b"},{"name":"GET","item":[{"name":"publications - Finished publication FR","event":[{"listen":"prerequest","script":{"id":"268e093d-643b-4841-8dd0-a16da45b7af2","exec":[""],"type":"text/javascript"}},{"listen":"test","script":{"id":"90dcaf9f-9db9-4fc2-8883-f2736fc68412","exec":[""],"type":"text/javascript"}}],"id":"271bae1f-b368-4e43-a4d9-31d5b072d93f","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"},{"key":"Accept-Language","value":"FR","type":"text"}],"url":{"raw":"{{dataAPIBaseUrl}}/publications?deliveryId=bebe18d0-d19b-452c-84bc-6eed7dfe417a","host":["{{dataAPIBaseUrl}}"],"path":["publications"],"query":[{"key":"deliveryId","value":"bebe18d0-d19b-452c-84bc-6eed7dfe417a"}]}},"response":[]}],"id":"17efe0cd-e4a3-42ea-9ed2-0fa395a9a9c8"}],"id":"60a283a0-64b9-4626-90f0-dc76fb9e8d63"},{"name":"Test case : order a SRA","item":[{"name":"token","event":[{"listen":"test","script":{"exec":["pm.environment.set(\"idToken\", JSON.parse(responseBody).idToken);\r","pm.environment.set(\"Authorization\", JSON.parse(responseBody).idToken);"],"type":"text/javascript","id":"7727521b-b659-4877-be00-f823602bd877"}}],"id":"5e571435-5aef-4bda-93fd-68339ad5ac81","protocolProfileBehavior":{"disabledSystemHeaders":{},"disableBodyPruning":true},"request":{"auth":{"type":"apikey","apikey":[{"key":"value","value":"{{dataAPIApiKey}}","type":"string"},{"key":"key","value":"x-api-key","type":"string"}]},"method":"POST","header":[],"body":{"mode":"raw","raw":"{\r\n    \"password\": \"{{awsPassword}}\",\r\n    \"grantType\": \"password\",\r\n    \"username\": \"{{awsLogin}}\"\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{authentificationAPIBaseUrl}}/token","host":["{{authentificationAPIBaseUrl}}"],"path":["token"]}},"response":[]},{"name":"publications -  SRA","event":[{"listen":"prerequest","script":{"id":"7193d544-adaa-49bf-9e45-547a21bc6bc7","exec":[""],"type":"text/javascript"}},{"listen":"test","script":{"id":"01961978-3cbf-4ab3-95d5-32bacb81c93a","exec":["pm.environment.set(\"newDeliveryId\", JSON.parse(responseBody).publications[0].deliveryId);"],"type":"text/javascript"}}],"id":"9e36f1a5-4e00-40db-b982-ce73998db982","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"},{"key":"Accept-Language","value":"FR","type":"text"}],"body":{"mode":"raw","raw":"{\r\n    \"countryCode\": \"FR\",\r\n    \"assessments\": [\r\n        {\r\n            \"naceCode\" : \"0112\",\r\n            \"slug\": \"sector-risk-assessment\"\r\n        }\r\n    ]\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{dataAPIBaseUrl}}/publications/orders","host":["{{dataAPIBaseUrl}}"],"path":["publications","orders"]}},"response":[]},{"name":"publications - Finished publication","event":[{"listen":"prerequest","script":{"id":"268e093d-643b-4841-8dd0-a16da45b7af2","exec":[""],"type":"text/javascript"}},{"listen":"test","script":{"id":"90dcaf9f-9db9-4fc2-8883-f2736fc68412","exec":[""],"type":"text/javascript"}}],"id":"8438e6ff-2059-49ec-a1e2-2fa8b6c6fca5","protocolProfileBehavior":{"disableBodyPruning":true,"disabledSystemHeaders":{}},"request":{"method":"GET","header":[{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"},{"key":"authorization","value":"{{idToken}}","type":"text"}],"url":{"raw":"{{dataAPIBaseUrl}}/publications?deliveryId={{newDeliveryId}}","host":["{{dataAPIBaseUrl}}"],"path":["publications"],"query":[{"key":"deliveryId","value":"{{newDeliveryId}}"}]}},"response":[]}],"id":"d7e16536-2ce7-48ce-a09f-5b08ca031a39"},{"name":"Test case : order a credit opinion","item":[{"name":"token","event":[{"listen":"test","script":{"exec":["pm.environment.set(\"idToken\", JSON.parse(responseBody).idToken);\r","pm.environment.set(\"Authorization\", JSON.parse(responseBody).idToken);"],"type":"text/javascript","id":"7727521b-b659-4877-be00-f823602bd877"}}],"id":"e88cf9ca-fcae-46ed-9acc-3114e2a58801","protocolProfileBehavior":{"disabledSystemHeaders":{},"disableBodyPruning":true},"request":{"auth":{"type":"apikey","apikey":[{"key":"value","value":"{{dataAPIApiKey}}","type":"string"},{"key":"key","value":"x-api-key","type":"string"}]},"method":"POST","header":[],"body":{"mode":"raw","raw":"{\r\n    \"password\": \"{{awsPassword}}\",\r\n    \"grantType\": \"password\",\r\n    \"username\": \"{{awsLogin}}\"\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{authentificationAPIBaseUrl}}/token","host":["{{authentificationAPIBaseUrl}}"],"path":["token"]}},"response":[]},{"name":"companies - Search by companyInfo","event":[{"listen":"prerequest","script":{"id":"64ed6003-efd3-4622-8c02-a30198b76f98","exec":[""],"type":"text/javascript"}},{"listen":"test","script":{"id":"6e31d661-c42f-4f82-ab3e-3c5db64fe111","exec":["pm.environment.set(\"newCompanyId\", JSON.parse(responseBody)[0].id);"],"type":"text/javascript"}}],"id":"ce832d2b-67d8-45ef-a4ea-a08e7638cb85","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"auth":{"type":"noauth"},"method":"GET","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"}],"url":{"raw":"{{dataAPIBaseUrl}}/companies?companyName=HACK-Hack Ralf&postalCode=70-552&city=Szczecin&countryCode=PL","host":["{{dataAPIBaseUrl}}"],"path":["companies"],"query":[{"key":"companyId","value":"397fb600-414c-3a55-a41a-d66bb6cfb36c","description":"Company identifier","disabled":true},{"key":"companyName","value":"HACK-Hack Ralf","description":"Company name"},{"key":"postalCode","value":"70-552","description":"Postal code, ZIP Code"},{"key":"city","value":"Szczecin","description":"City"},{"key":"countryCode","value":"PL","description":"Country code (ISO 3166 Alpha-2)"},{"key":"range","value":"10-25","description":"Pagination interval\n\nEx: Resources from an index to another included one (from 10 to 25 => ?range = 10-25).","disabled":true},{"key":"externalId","value":"statistic-number%23810684000","disabled":true}]}},"response":[]},{"name":"publications -  Company slug with companyId","event":[{"listen":"prerequest","script":{"id":"1f53838d-859c-477b-869a-3bc103457ddd","exec":[""],"type":"text/javascript"}},{"listen":"test","script":{"id":"db8ad608-a29d-4ede-b969-7d87c5b4570b","exec":["pm.environment.set(\"newDeliveryId\", JSON.parse(responseBody).publications[0].deliveryId);"],"type":"text/javascript"}}],"id":"e274d829-e134-472e-98f3-4732b23010ed","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"authorization","value":"{{idToken}}","type":"text"},{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"},{"key":"Accept-Language","value":"EN","type":"text"}],"body":{"mode":"raw","raw":"{\r\n    \"companyId\": \"{{newCompanyId}}\",\r\n    \"assessments\": [\r\n        {\r\n            \"currency\" : \"EUR\",\r\n            \"slug\": \"credit-opinion\"\r\n        }\r\n    ]\r\n}","options":{"raw":{"language":"json"}}},"url":{"raw":"{{dataAPIBaseUrl}}/publications/orders","host":["{{dataAPIBaseUrl}}"],"path":["publications","orders"]}},"response":[]},{"name":"publications - Finished publication","event":[{"listen":"prerequest","script":{"id":"268e093d-643b-4841-8dd0-a16da45b7af2","exec":[""],"type":"text/javascript"}},{"listen":"test","script":{"id":"90dcaf9f-9db9-4fc2-8883-f2736fc68412","exec":[""],"type":"text/javascript"}}],"id":"5e093e65-bc9f-4e4e-821d-9e2379655fd1","protocolProfileBehavior":{"disableBodyPruning":true,"disabledSystemHeaders":{}},"request":{"method":"GET","header":[{"key":"x-api-key","value":"{{dataAPIApiKey}}","type":"text"},{"key":"authorization","value":"{{idToken}}","type":"text"}],"url":{"raw":"{{dataAPIBaseUrl}}/publications?deliveryId={{newDeliveryId}}","host":["{{dataAPIBaseUrl}}"],"path":["publications"],"query":[{"key":"deliveryId","value":"{{newDeliveryId}}"}]}},"response":[]}],"id":"b9996fa1-612c-461c-921d-bf62f52257b0"}],"auth":{"type":"oauth2"},"event":[{"listen":"prerequest","script":{"id":"c6d6d239-de63-48e4-ac59-d19c814b985f","type":"text/javascript","exec":["// Code n\"cessaire tant que la sandbox n'a pas été redéployée","if (pm.environment.name.includes('Playground - Sandbox') && pm.request.url.path[0] != \"token\") {","    var part = pm.request.url.path[0];","    if (part == \"countries\") {","        part = \"country\";","    } else if (part == \"compagnies\") {","        part = \"company\";","    } else {","        part = part.slice(0, -1);","    }","    pm.environment.set(\"dataAPIBaseUrl\", pm.environment.get(\"dataAPIBaseUrl\").replace(\"dataapi\", part));","}"]}},{"listen":"test","script":{"id":"82a632a5-0299-405b-8c57-69094556b108","type":"text/javascript","exec":[""]}}]}